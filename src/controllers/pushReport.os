#Использовать 1connector
#Использовать json

&HttpMethod("POST")
Функция Index() Экспорт
	
	ДанныеФормы = ЗапросHttp.ДанныеФормы;
	
	Если ДанныеФормы = Неопределено Тогда
		Возврат КодСостояния(200);
	КонецЕсли;
	
	ФайлыЗапроса = ДанныеФормы.Файлы;
	
	Если ФайлыЗапроса = Неопределено Тогда
		Возврат КодСостояния(200);
	КонецЕсли;
	
	Если ФайлыЗапроса.Количество() <> 1 Тогда
		ВызватьИсключение("Количество файлов не равно одному");
	КонецЕсли;

	Попытка
		ОбработкаОшибок.ОбработатьОтчетОбОшибке(ФайлыЗапроса[0]);
		Возврат КодСостояния(200);
	Исключение
		Сообщить(ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
		Возврат КодСостояния(500);
	КонецПопытки;
	
КонецФункции